---
title: "mtgetl"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Get data from MTG API

Require necessary packages

```{r}
require(httr)
require(jsonlite)
require(tidyverse)
```
 
establish authentication crendentials
```{r}
user <- Sys.getenv("TCG_PUBLIC")
key <- Sys.getenv("TCG_PRIVATE")
body = paste("grant_type=client_credentials&client_id=",user,"&client_secret=",key,sep="")

token <- httr::POST(url = "https://api.tcgplayer.com/token",
           body = body,
           httr::add_headers("application/x-www-form-urlencoded"))

token.content <- httr::content(token)
token <- token.content[1]
bearer <- toString(token)

token.content

auth.header <- paste("Authorization: bearer",bearer)

```

get possible categories

```{r}
categories <- httr::GET(url = "https://api.tcgplayer.com/catalog/groups",
                        httr::add_headers(auth.header))
categories.content
```

